(this["webpackJsonpvinted-tech-test"]=this["webpackJsonpvinted-tech-test"]||[]).push([[0],[,,,,,,,,,,,function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},function(t,e,n){},,function(t,e,n){},function(t,e,n){},function(t,e,n){"use strict";n.r(e);var r=n(1),c=n.n(r),o=n(6),i=n.n(o),s=(n(11),n(2)),a=function(t,e,n){var c=Object(r.useRef)(null),o=Object(r.useRef)(null),i=t&&!e,a=Object(r.useCallback)((function(t){var e=Object(s.a)(t,1)[0].isIntersecting;i&&e&&n()}),[i]);return Object(r.useEffect)((function(){var t=c.current;if(t){var e=new IntersectionObserver(a,{rootMargin:"1500px"});e.observe(t),o.current=e}return function(){t&&o.current.unobserve(t)}}),[a]),c},u=n(0),l=function(t){var e=t.hasMore,n=t.isLoading,r=t.onLoadMore,c=t.loader,o=t.children,i=a(e,n,r);return Object(u.jsxs)("div",{children:[o,Object(u.jsx)("div",{ref:i,children:e&&c()})]})},f=function(t){var e="";return t.url_l&&t.width_l&&(e+="".concat(t.url_l," ").concat(t.width_l,"w, ")),t.url_m&&t.width_m&&(e+="".concat(t.url_m," ").concat(t.width_m,"w, ")),e+="".concat(t.url_s," ").concat(t.width_s,"w, ")},j=(n(13),function(){return Object(u.jsx)("div",{className:"picture-backdrop"})}),d=(n(14),function(t){var e=t.title,n=t.ownername,r=t.isFavourite,c=t.onClick;return Object(u.jsxs)("div",{className:"picture-overlay",children:[Object(u.jsxs)("div",{className:"description",children:[Object(u.jsx)("h4",{className:"ellipsis",children:e||"Untitled"}),Object(u.jsx)("hr",{}),Object(u.jsx)("i",{className:"ellipsis",children:n})]}),Object(u.jsx)("button",{className:r?"selected":"",onClick:c,children:r?"Unfavour":"Favourite"})]})}),h=(n(15),function(t){var e=t.photo,n=t.isFavourite,r=t.onFavour,c=t.onUnfavour,o=e.title,i=e.ownername;return Object(u.jsxs)("div",{className:"photo-display",children:[Object(u.jsx)(j,{}),Object(u.jsx)(d,{title:o,ownername:i,isFavourite:n,onClick:function(){n?c(e.id):r(e.id)}}),Object(u.jsx)("img",{srcSet:f(e),src:e.url_s,alt:e.title})]})}),v=(n(16),function(t,e){return e.includes(t)}),b=function(t){var e=t.photos,n=t.favourites,r=t.onFavour,c=t.onUnfavour,o=e.map((function(t){return Object(u.jsx)(h,{photo:t,isFavourite:v(t.id,n),onFavour:r,onUnfavour:c},t.id)}));return Object(u.jsx)("div",{className:"photo-grid",children:Object(u.jsx)("div",{children:o})})},p=(n(17),function(){return Object(u.jsx)("div",{className:"loader",children:Object(u.jsx)("svg",{className:"spinner",viewBox:"0 0 50 50",children:Object(u.jsx)("circle",{className:"path",cx:"25",cy:"25",r:"20",fill:"none",strokeWidth:"5"})})})}),O=function(t,e){var n=Object(r.useState)((function(){var n=localStorage.getItem(e);return n?JSON.parse(n):t})),c=Object(s.a)(n,2),o=c[0],i=c[1];return Object(r.useEffect)((function(){localStorage.setItem(e,JSON.stringify(o))}),[e,o]),[o,i]},m=n(3),x=n.n(m),g=n(4),w=function(){var t=Object(g.a)(x.a.mark((function t(e){var n,r;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return 24,"url_s,url_m,url_l,owner_name",n="".concat("https://www.flickr.com/services/rest","/?method=flickr.photos.getRecent&api_key=").concat("853c45c04a7fda69d4639ce36d98f6da","&format=json&nojsoncallback=1&extras=").concat("url_s,url_m,url_l,owner_name","&per_page=").concat(24,"&page=").concat(e),t.next=5,fetch(n);case 5:if(200===(r=t.sent).status){t.next=8;break}throw Error("Something went wrong while fetching pictures");case 8:return t.abrupt("return",r.json());case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),_=function(t,e){var n=t.map((function(t){return t.id})),r=e.filter((function(t){return!n.includes(t.id)}));return t.concat(r)},k=function(t){var e=Object(r.useState)({photos:[],pagesCount:0}),n=Object(s.a)(e,2),c=n[0],o=n[1],i=Object(r.useState)(!1),a=Object(s.a)(i,2),u=a[0],l=a[1];return Object(r.useEffect)((function(){(function(){var t=Object(g.a)(x.a.mark((function t(e){var n;return x.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return l(!0),t.next=3,w(e);case 3:n=t.sent,o((function(t){return{pagesCount:n.photos.pages,photos:_(t.photos,n.photos.photo)}})),l(!1);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}})()(t)}),[t]),{isLoading:u,hasMore:t<c.pagesCount,photos:c.photos}},N=(n(19),n(20),function(){return Object(u.jsx)("div",{className:"splash-screen",children:Object(u.jsx)(p,{})})}),F=function(){var t=Object(r.useState)(1),e=Object(s.a)(t,2),n=e[0],c=e[1],o=O([],"favourites"),i=Object(s.a)(o,2),a=i[0],f=i[1],j=k(n),d=j.photos,h=j.hasMore,v=j.isLoading;return Object(u.jsxs)("div",{className:"main",children:[1===n&&v&&Object(u.jsx)(N,{}),Object(u.jsx)(l,{onLoadMore:function(){c((function(t){return t+1}))},loader:function(){return Object(u.jsx)(p,{})},isLoading:v,hasMore:h,children:Object(u.jsx)(b,{photos:d,favourites:a,onFavour:function(t){f((function(e){return e.concat(t)}))},onUnfavour:function(t){f((function(e){return e.filter((function(e){return e!==t}))}))}})})]})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,22)).then((function(e){var n=e.getCLS,r=e.getFID,c=e.getFCP,o=e.getLCP,i=e.getTTFB;n(t),r(t),c(t),o(t),i(t)}))};i.a.render(Object(u.jsx)(c.a.StrictMode,{children:Object(u.jsx)(F,{})}),document.getElementById("root")),S()}],[[21,1,2]]]);
//# sourceMappingURL=main.4b134fdf.chunk.js.map